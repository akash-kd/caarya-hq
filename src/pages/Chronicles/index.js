import { Plus } from "@phosphor-icons/react";
import CGCsChronicles from "components/Chronicles/CGC";
import EventsChronicles from "components/Chronicles/Events";
import UsersChronicles from "components/Chronicles/Feed";
import CreateEditChronicle from "components/Chronicles/Modal/CreateEditChronicle";
import ProductsChronicles from "components/Chronicles/Products";
import ChronosButton from "components/Comman/Buttons";
import EmptyState from "components/Comman/EmptyState";
import { getAllChronicles } from "config/APIs/chronicles";
import { CHRONICLES_FOR } from "helpers/constants/chronicles";
import React, { useEffect, useState } from "react";

function Chronicles() {
  const [selectedCategory, setSelectedCategory] = useState("product");
  const [list, setList] = useState([]);
  const [createModal, setCreateModal] = useState(false);

  const fetchAll = async () => {
    try {
      const res = await getAllChronicles();
      setList(res?.data?.data);
    } catch (err) {
      console.log(err.message);
    }
  };

  useEffect(() => {
    fetchAll();
  }, []);
  return (
    <div>
      <CreateEditChronicle
        isOpen={createModal}
        closeModal={() => {
          setCreateModal(false);
        }}
        onUpdate={() => fetchAll()}
      />
      <div className="relative grid grid-cols-5 -mt-3">
        {CHRONICLES_FOR?.map((category, index) => {
          return (
            <div
              key={index}
              onClick={() => {
                setSelectedCategory(category?.value);
              }}
              className={`px-1 py-2 space-y-1 flex flex-col items-center font-lato text-3xs ${
                selectedCategory == category?.value
                  ? "text-white font-semibold bg-primary-yellow-dark"
                  : "text-primary-gray-800 font-light"
              }`}
            >
              {category?.svg}
              <p className="">{category?.label}</p>
            </div>
          );
        })}
      </div>
      <div className="mt-6 max-h-[90vh] overflow-y-auto space-y-2 px-4">
        <div className="p-2 flex flex-row items-center space-x-4 text-primary-gray-800 font-karla text-base font-medium">
          {CHRONICLES_FOR?.find((i) => i?.value == selectedCategory)?.svg}
          <p>
            {CHRONICLES_FOR?.find((i) => i?.value == selectedCategory)?.label}
          </p>
        </div>
        {selectedCategory == "product" && (
          <ProductsChronicles
            list={list?.filter((item) => item?.storyFor == "product")}
          />
        )}
        {selectedCategory == "event" && (
          <EventsChronicles
            list={list?.filter((item) => item?.storyFor == "event")}
          />
        )}
        {selectedCategory == "user" && (
          <UsersChronicles
            list={list?.filter((item) => item?.storyFor == "user")}
          />
        )}
        {selectedCategory == "cgc" && (
          <CGCsChronicles
            list={list?.filter((item) => item?.storyFor == "cgc")}
          />
        )}
        {selectedCategory == "number" && (
          <EmptyState
            svg={
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="120"
                height="121"
                viewBox="0 0 120 121"
                fill="none"
              >
                <g clip-path="url(#clip0_4571_111157)">
                  <path
                    d="M116.068 40.2621H98.4077C98.4417 39.9623 98.4612 39.6584 98.4612 39.3497C98.4612 35.2671 95.3965 31.8891 91.447 31.3896V23.1898C91.447 20.8338 89.5303 18.9171 87.1744 18.9171H80.1898C80.3278 18.3563 80.4023 17.7708 80.4023 17.168C80.4023 13.1295 77.1166 9.84375 73.0781 9.84375C69.0396 9.84375 65.7539 13.1295 65.7539 17.168C65.7539 17.7708 65.8287 18.3563 65.9665 18.9171H31.6861C29.3302 18.9171 27.4134 20.8338 27.4134 23.1898V40.2619H22.2755C21.3047 40.2619 20.5177 41.0489 20.5177 42.0197C20.5177 42.9905 21.3047 43.7775 22.2755 43.7775H27.4134V52.6699H3.51562V44.1945C3.51562 43.9648 3.70242 43.7777 3.93211 43.7777H13.5973C14.568 43.7777 15.3551 42.9907 15.3551 42.0199C15.3551 41.0491 14.568 40.2621 13.5973 40.2621H3.93211C1.76391 40.2621 0 42.026 0 44.1945V111.23C0 113.398 1.76391 115.162 3.93211 115.162H51.9091C54.0773 115.162 55.8412 113.398 55.8412 111.23V104.993H64.1583V111.23C64.1583 113.398 65.9222 115.162 68.0904 115.162H82.3992C83.37 115.162 84.157 114.375 84.157 113.404C84.157 112.433 83.37 111.646 82.3992 111.646H68.0904C67.8607 111.646 67.6739 111.459 67.6739 111.23V104.993H87.1741C89.5301 104.993 91.4468 103.076 91.4468 100.72V56.1858H116.484V111.229C116.484 111.459 116.298 111.646 116.068 111.646H91.0777C90.1069 111.646 89.3198 112.433 89.3198 113.404C89.3198 114.375 90.1069 115.162 91.0777 115.162H116.068C118.236 115.162 120 113.398 120 111.229V44.1945C120 42.026 118.236 40.2621 116.068 40.2621ZM94.9455 39.3497C94.9455 41.8369 92.9222 43.8605 90.435 43.8605C87.9478 43.8605 85.9242 41.8371 85.9242 39.3497C85.9242 36.8625 87.9476 34.8391 90.435 34.8391C92.922 34.8391 94.9455 36.8625 94.9455 39.3497ZM73.0781 13.3596C75.1781 13.3596 76.8867 15.0682 76.8867 17.1682C76.8867 19.2682 75.1781 20.9768 73.0781 20.9768C70.9781 20.9768 69.2695 19.2682 69.2695 17.1682C69.2695 15.0682 70.9779 13.3596 73.0781 13.3596ZM31.6861 22.4327H67.9941C69.3124 23.7063 71.1047 24.4922 73.0781 24.4922C75.0516 24.4922 76.8438 23.7063 78.1622 22.4327H87.1744C87.5918 22.4327 87.9314 22.7723 87.9314 23.1898V31.7252C86.9194 32.0583 85.9964 32.5875 85.2061 33.2679H30.9291V23.1898C30.9291 22.7723 31.2687 22.4327 31.6861 22.4327ZM87.1744 101.477H31.6861C31.2687 101.477 30.9291 101.137 30.9291 100.72V81.0288C30.9291 80.058 30.142 79.271 29.1712 79.271C28.2005 79.271 27.4134 80.058 27.4134 81.0288V100.72C27.4134 103.076 29.3302 104.993 31.6861 104.993H52.3259V111.229C52.3259 111.459 52.1391 111.646 51.9094 111.646H3.93211C3.70242 111.646 3.51562 111.459 3.51562 111.229V56.1858H27.4134V72.3509C27.4134 73.3216 28.2005 74.1087 29.1712 74.1087C30.142 74.1087 30.9291 73.3216 30.9291 72.3509V36.7835H82.8316C82.5588 37.5898 82.4086 38.4523 82.4086 39.3497C82.4086 42.9014 84.7282 45.9197 87.9314 46.9741V100.72C87.9314 101.137 87.5918 101.477 87.1744 101.477ZM91.447 52.6702V47.31C93.8142 47.0107 95.8629 45.678 97.1248 43.7777H116.068C116.298 43.7777 116.484 43.9645 116.484 44.1945V52.6704L91.447 52.6702Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M64.5673 71.4848C63.1341 70.2613 61.2307 69.5842 59.208 69.5781C59.1989 69.5781 59.19 69.5781 59.1809 69.5781C57.1685 69.5781 55.2715 70.2433 53.8376 71.4529C53.0953 72.0787 53.0011 73.1877 53.6271 73.9298C54.2529 74.672 55.362 74.7665 56.104 74.1402C56.8934 73.4746 58.0141 73.0938 59.1816 73.0938H59.1973C60.3705 73.0973 61.4958 73.4854 62.2847 74.1588C62.6159 74.4414 63.0213 74.5795 63.4252 74.5795C63.9218 74.5795 64.4154 74.3702 64.763 73.9628C65.3932 73.2245 65.3055 72.115 64.5673 71.4848Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M69.0578 63.0807C69.0426 63.0802 69.0276 63.0781 69.0121 63.0781H69.0065C69.006 63.0781 69.0053 63.0781 69.0049 63.0781H68.9915H68.984C68.9833 63.0781 68.9824 63.0781 68.9817 63.0781C68.0156 63.0781 67.2398 63.8588 67.2344 64.8261C67.2292 65.7395 67.9312 66.4937 68.823 66.5841C68.8361 66.5856 68.8497 66.5853 68.8628 66.5865C68.906 66.59 68.9489 66.5935 68.9929 66.5938H69.0028C69.0632 66.5938 69.123 66.5907 69.1821 66.5846C70.0696 66.4958 70.7629 65.7467 70.7629 64.8357C70.7627 63.883 70.0038 63.1088 69.0578 63.0807Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M49.8852 63.0781H49.8646C49.8613 63.0781 49.858 63.0781 49.8547 63.0781C48.8886 63.0781 48.1128 63.8588 48.1074 64.8261C48.1021 65.7969 48.8949 66.5884 49.8657 66.5938H49.8756C50.8417 66.5938 51.6278 65.813 51.6332 64.8458C51.6388 63.8748 50.856 63.0835 49.8852 63.0781Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M37.9312 29.5823C37.9343 29.5825 37.9371 29.5832 37.9402 29.5837C37.9786 29.5877 38.018 29.5886 38.0571 29.5902C38.078 29.5912 38.0986 29.5935 38.1197 29.5938H38.1291C39.0956 29.5938 39.8817 28.8126 39.8866 27.8451C39.8911 26.9917 39.2864 26.2778 38.4809 26.114C38.4787 26.1135 38.4764 26.1133 38.4741 26.1128C38.4199 26.102 38.3648 26.0934 38.3091 26.0875C38.2891 26.0854 38.2685 26.0856 38.2484 26.0842C38.2116 26.0816 38.175 26.0784 38.1377 26.0781H38.1155C38.1124 26.0781 38.1094 26.0781 38.1061 26.0781C38.0456 26.0781 37.9859 26.0812 37.927 26.0873C37.0406 26.1761 36.3574 26.9252 36.3574 27.8362C36.3572 28.7409 37.0507 29.4855 37.9312 29.5823Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M43.4427 29.5938C44.4134 29.5938 45.2005 28.8067 45.2005 27.8359C45.2005 26.8652 44.4134 26.0781 43.4427 26.0781H43.4209C42.4501 26.0781 41.6738 26.8652 41.6738 27.8359C41.6738 28.8067 42.4719 29.5938 43.4427 29.5938Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M48.761 29.5938C49.7318 29.5938 50.5188 28.8067 50.5188 27.8359C50.5188 26.8652 49.7318 26.0781 48.761 26.0781H48.7392C47.7684 26.0781 46.9922 26.8652 46.9922 27.8359C46.9922 28.8067 47.7902 29.5938 48.761 29.5938Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M12.9133 33.4372C13.2564 33.7803 13.7064 33.9521 14.1562 33.9521C14.606 33.9521 15.056 33.7806 15.3991 33.4372L16.3354 32.5009L17.2717 33.4372C17.6149 33.7806 18.0649 33.9521 18.5146 33.9521C18.9644 33.9521 19.4144 33.7806 19.7575 33.4372C20.444 32.7507 20.444 31.6379 19.7575 30.9514L18.8212 30.0151L19.7575 29.0788C20.444 28.3923 20.444 27.2792 19.7575 26.593C19.071 25.9065 17.958 25.9065 17.2717 26.593L16.3354 27.5293L15.3991 26.593C14.7128 25.9065 13.5998 25.9065 12.9133 26.593C12.2268 27.2795 12.2268 28.3923 12.9133 29.0788L13.8496 30.0151L12.9133 30.9514C12.2268 31.6377 12.2268 32.7507 12.9133 33.4372Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M100.912 31.2575C101.255 31.6006 101.705 31.7724 102.154 31.7724C102.604 31.7724 103.054 31.6009 103.397 31.2575L104.334 30.3212L105.27 31.2575C105.613 31.6006 106.063 31.7724 106.513 31.7724C106.963 31.7724 107.413 31.6009 107.756 31.2575C108.442 30.571 108.442 29.458 107.756 28.7717L106.819 27.8354L107.756 26.8991C108.442 26.2126 108.442 25.0996 107.756 24.4133C107.069 23.7268 105.956 23.7268 105.27 24.4133L104.334 25.3496L103.397 24.4133C102.711 23.7268 101.598 23.7268 100.912 24.4133C100.225 25.0998 100.225 26.2128 100.912 26.8991L101.848 27.8354L100.912 28.7717C100.225 29.458 100.225 30.571 100.912 31.2575Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                  <path
                    d="M56.1633 13.1872C56.5064 13.5303 56.9564 13.7021 57.4062 13.7021C57.856 13.7021 58.306 13.5306 58.6491 13.1872L59.5854 12.2509L60.5217 13.1872C60.8649 13.5303 61.3149 13.7021 61.7646 13.7021C62.2144 13.7021 62.6644 13.5306 63.0075 13.1872C63.694 12.5007 63.694 11.3877 63.0075 10.7014L62.0712 9.7651L63.0075 8.82877C63.694 8.14228 63.694 7.02924 63.0075 6.34299C62.321 5.6565 61.208 5.6565 60.5217 6.34299L59.5854 7.27932L58.6491 6.34299C57.9626 5.6565 56.8496 5.6565 56.1633 6.34299C55.4768 7.02947 55.4768 8.14252 56.1633 8.82877L57.0996 9.7651L56.1633 10.7014C55.4768 11.3877 55.4768 12.5007 56.1633 13.1872Z"
                    fill="currentColor"
                    fill-opacity="0.5"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_4571_111157">
                    <rect
                      width="120"
                      height="120"
                      fill="white"
                      transform="translate(0 0.5)"
                    />
                  </clipPath>
                </defs>
              </svg>
            }
            text="No Updates found!"
          />
        )}
      </div>
      <div className="fixed bottom-20 right-4">
        <ChronosButton
          primary
          text="Add Chronicles"
          icon={<Plus size={12} className="mr-1" />}
          onClick={() => {
            setCreateModal(true);
          }}
          reverseIcon
        />
      </div>
    </div>
  );
}

export default Chronicles;
